# Story 5.1: Implement Journaling Feature

### Status
Draft

### Story
As an authenticated user, I want the option to write and save a short journal entry during my daily ritual, so that I can reflect on my thoughts and feelings in more detail.

### Acceptance Criteria
1. A new `JournalInput` component, with a multi-line `Textarea` and a "Save Journal" button, is displayed on the `/daily-ritual` page.
2. When a user submits a journal entry, a `POST` request is sent to the `/api/daily-ritual/intention` endpoint. The request body must include a `type` field set to `'journal_entry'`.
3. The backend successfully saves the journal entry to the `interactions` table with the `contentType` correctly set to `'journal_entry'`.
4. The database `contentTypeEnum` in `shared/schema.ts` is updated to include the `'journal_entry'` value, and a migration is applied.
5. The UI displays a confirmation toast, such as "Journal entry saved," upon successful submission.

### Tasks / Subtasks
- [ ] **Task 1: Backend - Update API and Schema** (AC: #3, #4)
    - [ ] Modify the `contentTypeEnum` in `shared/schema.ts` to include `'journal_entry'`.
    - [ ] Generate and apply the database migration for the enum change.
    - [ ] Update the `POST /api/daily-ritual/intention` endpoint to check for a `type` field in the request body and save to the `interactions` table with the corresponding `contentType`.
- [ ] **Task 2: Frontend - Create Journal Component** (AC: #1)
    - [ ] Create a new component `client/src/components/daily-ritual/JournalInput.tsx`.
    - [ ] Use the `Textarea` and `Button` components from `shadcn/ui` to build the form.
- [ ] **Task 3: Frontend - Integrate Journal Component** (AC: #2, #5)
    - [ ] Add the new `JournalInput` component to the `DailyRitual.tsx` page.
    - [ ] Create a `useMutation` hook to handle the `POST` request, ensuring it sends the `type: 'journal_entry'` in the body.
    - [ ] Implement a success toast notification.
- [ ] **Task 4: Write Tests**
    - [ ] Write unit tests for the `JournalInput` component.
    - [ ] Update integration tests for the `/api/daily-ritual/intention` endpoint to cover the new journaling logic.

### Dev Notes
* This story is dependent on Epic 1 (Authentication) and Epic 3 (Ritual Persistence).
* This feature reuses the `interactions` table and an existing API endpoint to minimize complexity, as decided in the architecture plan.

---
### Change Log
| Date | Version | Description | Author |
| :--- | :--- | :--- | :--- |
| 2025-10-11 | 1.0 | Initial story creation. | Scrum Master |